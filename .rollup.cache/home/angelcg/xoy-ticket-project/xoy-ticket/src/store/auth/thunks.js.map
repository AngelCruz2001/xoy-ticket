{"version":3,"file":"thunks.js","sourceRoot":"","sources":["thunks.ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { Dispatch } from 'redux';\n\n\nimport Swal from 'sweetalert2'\n\nimport xoyApi from '../../api/xoyApi';\nimport { login, logout } from './authSlice';\nimport { Auth } from '../../interfaces/auth.resp';\n\ntype DataUserLogin = {\n    correo: string;\n    contrasena: string;\n}\n\ntype DataUserSignUp = {\n    nombre: string;\n    folio: string;\n    correo: string;\n    contrasena: string;\n}\n\nexport const startLogin = (dataUser: DataUserLogin) => {\n    return async (dispatch: Dispatch) => {\n        try {\n            const { data } = await xoyApi.post<Auth>('auth/login', dataUser);\n            localStorage.setItem('token', data.token);\n            localStorage.setItem('data', JSON.stringify(data.data));\n            dispatch(login({ token:data.token, user: data.data }));\n\n        } catch (error: any) {\n            \n            Swal.fire({\n                title: 'Error',\n                text: error.response.data.error,\n                icon: 'error'\n            })\n        }\n    };\n};\n\nexport const startSignUp = (dataUser: DataUserSignUp) => {\n    return async (dispatch: Dispatch) => {\n        try {\n            const { data } = await xoyApi.post<Auth>('auth/register', dataUser);\n\n            \n            Swal.fire({\n                title: 'Genial',\n                text: 'Te has registrado con exito',\n                icon: 'success'\n            })\n\n            const { data: dataLogin } = await xoyApi.post<Auth>('auth/login', {\n                correo: dataUser.correo,\n                contrasena: dataUser.contrasena\n            });\n\n\n            localStorage.setItem('token', dataLogin.token);\n            localStorage.setItem('data', JSON.stringify(dataLogin.data));\n\n            dispatch(login({ token: data.token, user: dataLogin.data }));\n\n        } catch (error: any) {\n            console.log(error.response.data.error);\n            Swal.fire({\n                title: 'Error',\n                text: error.response.data.error,\n                icon: 'error'\n            })\n        }\n    };\n};\n\n\n\n\nexport const checkToken = () => {\n    return async (dispatch: Dispatch) => {\n        try {\n            const token = localStorage.getItem('token');\n            \n            const data = JSON.parse(localStorage.getItem('data')!);\n            if (token && data) {\n             \n                dispatch(login({ token, user: data }));\n            }\n            \n            if (!token || !data) return dispatch(logout());\n\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n}\n\n"]}