{"version":3,"file":"List.jsx","sourceRoot":"","sources":["List.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Cell } from './Cell';\nimport { Row } from './Row';\nimport \"./List.scss\"\nimport { useAppDispatch, useAppSelector } from 'hooks/hooks';\nimport { startGetTickets } from 'store/tickets/thunks';\nimport { Card } from '../card/Card';\n// Import moment\nimport moment from 'moment';\nimport { PrintButton } from './PrintButton';\nimport { Datum } from '../../interfaces/ticket.resp';\nimport { pdf, PDFDownloadLink } from '@react-pdf/renderer';\nimport { DocumentPdf } from 'pages/pdf/DocumentPdf';\nimport QRCode from \"qrcode\";\nimport Swal from 'sweetalert2';\nexport const Table = () => {\n\n  // 2022-08-26T00:00:00.000Z to date format\n  const [base64, setBase64] = useState(\"\");\n\n  useEffect(() => {\n    const qrCodeCanvas = document.querySelector('canvas');\n    if (qrCodeCanvas) {\n      setBase64(qrCodeCanvas.toDataURL());\n      console.log(qrCodeCanvas.toDataURL());\n    }\n  }, [])\n\n  const dispatch = useAppDispatch();\n  const { tickets } = useAppSelector(state => state.tickets);\n  const [ticketsData, setTicketsData] = useState<Datum[] | null>(null);\n  const [activeTicket, setActiveTicket] = useState<Datum | null>(null);\n  const [loadingPdfDownload, setLoadingPdfDownload] = useState(false)\n\n  useEffect(() => {\n    dispatch(startGetTickets())\n  }, [dispatch])\n\n  useEffect(() => {\n    if (tickets) {\n      tickets?.map((ticket, index) => {\n        QRCode.toDataURL(ticket.Transaccion,\n          (_: any, url: string) => (\n            setTicketsData(tickets?.map((ticket, index) => ({ ...ticket, qrCode: url }))\n            )\n          ))\n      })\n    }\n  }, [tickets])\n\n  const handleActiveTicket = (ticket: Datum) => {\n    activeTicket !== null ? setActiveTicket(null) : setActiveTicket(ticket);\n  }\n\n  const handlePrint = (ticket: Datum) => {\n    setLoadingPdfDownload(true)\n    // Swal loading\n    ticket.boletos.forEach(async (boleto, index) => {\n      const caca = await pdf(<DocumentPdf dataUser={boleto} qr={ticket.qrCode!} juego={ticket.JuegoDatos} ventaDatos={ticket.VentaDatos} />).toBlob();\n      const url = window.URL.createObjectURL(caca);\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', boleto.Nombre);\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    })\n    setLoadingPdfDownload(false)\n    // Swal.close();\n\n  }\n\n  return (\n    <Card>\n      <h1 className='titleCard'>\n        Lista de transacciones\n      </h1>\n\n      <hr />\n\n      <div className='list'>\n\n        <Row headers={true}>\n          <Cell text={''} />\n          <Cell text={'Transaccion'} />\n          <Cell text={\"Nombre del partido\"} />\n          <Cell text={\"Costo\"} />\n          <Cell text={'Fecha'} />\n          <Cell text={\"Hora\"} />\n          <Cell text={\"\"} />\n        </Row>\n        {\n          ticketsData?.map(ticket => (\n            <Row key={ticket.transaccion}>\n              <button\n                className='seeButton'\n                onClick={() => handleActiveTicket(ticket)}>\n                {\n                  activeTicket ? <i className=\"fa-solid fa-eye-slash\"></i>\n\n                    : <i className=\"fa-solid fa-eye\"></i>\n                }\n\n              </button>\n              <Cell text={ticket.transaccion} />\n              <Cell text={`${ticket.JuegoDatos.Equipo1} vs ${ticket.JuegoDatos.Equipo2} `} />\n              <Cell text={`$${ticket.Importe}`} />\n              <Cell text={moment(ticket.JuegoDatos.Fecha).format(\"DD/MM/YYYY\")} />\n              <Cell text={moment(ticket.JuegoDatos.Hora).format(\"HH:mm\")} />\n              <Cell icon='fa-solid fa-floppy-disk' clickFunction={() => handlePrint(ticket)} />\n            </Row>\n          ))\n        }\n\n        {activeTicket !== null &&\n          <div className='seatsTickets'>\n            <Row extra={true}>\n              <Cell text={\"Area\"} />\n              <Cell text={\"Fila\"} />\n              <Cell text={\"Columna\"} />\n              <Cell text={\"Importe\"} />\n              <Cell text={\"Descuento\"} />\n              <Cell text={\"\"} />\n\n            </Row>\n            {activeTicket.boletos.map((seat, i) => (\n              <Row key={seat.id} extra={true}>\n                <Cell text={seat.Area} />\n                <Cell text={seat.Fila} />\n                <Cell text={seat.Columna} />\n                <Cell text={seat.Importe} />\n                <Cell text={seat.Descuento} />\n                <PDFDownloadLink document={<DocumentPdf qr={activeTicket.qrCode!} dataUser={seat} ventaDatos={activeTicket.VentaDatos} juego={activeTicket.JuegoDatos} />} fileName={`${seat.Nombre}.pdf`}>\n                  {({ blob, url, loading, error }) => (base64 !== \"\" && loading ? 'Cargando documento' : <Cell icon='fa-solid fa-floppy-disk' />)}\n                </PDFDownloadLink>\n                {/* <Cell icon='fa-solid fa-floppy-disk'  /> */}\n              </Row>\n            ))}\n          </div>\n        }\n      </div>\n    </Card>\n\n  )\n}\n"]}